---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import tokoImage from "../assets/toko.jpg";
import pentolImage from "../assets/pentol.jpg";
---

<Layout>
	<!-- Navigation -->
	<nav
		class="fixed top-0 left-0 right-0 z-50 border-b border-white/5 bg-background-dark/60 backdrop-blur-xl transition-all duration-300"
		id="navbar"
	>
		<div class="max-w-7xl mx-auto px-4 sm:px-6 h-24 flex items-center justify-between">
			<div class="flex items-center gap-4 cursor-pointer group">
	<!-- Floating Cart Button -->
	<div class="fixed bottom-6 right-6 sm:bottom-10 sm:right-10 z-40">
		<a 
			href="https://wa.me/6282337040547?text=Halo%20Toko%20Barokah%20Inayah%2C%20saya%20mau%20pesan" 
			target="_blank" 
			class="relative group block"
		>
			<div
				class="absolute inset-0 bg-gold rounded-full blur-md opacity-30 group-hover:opacity-60 group-hover:scale-125 transition-all duration-500 animate-pulse"
			>
			</div>
			<div
				class="relative w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-gold to-orange-700 rounded-full flex items-center justify-center text-white shadow-2xl group-hover:scale-110 group-active:scale-95 transition-all duration-300 ring-1 ring-white/20"
			>
				<span class="material-symbols-outlined text-2xl sm:text-3xl">shopping_cart</span>
			</div>
		</a>
	</div>
				<div
					class="relative size-12 flex items-center justify-center"
				>
					<div class="absolute inset-0 bg-gold/20 rounded-full blur-md group-hover:blur-lg transition-all duration-500"></div>
					<div class="relative size-full bg-gradient-to-br from-gold to-orange-700 rounded-full flex items-center justify-center text-white border border-white/10 group-hover:scale-105 transition-transform duration-500">
						<span class="material-symbols-outlined text-2xl drop-shadow-md">storefront</span>
					</div>
				</div>
				<div>
					<h1 class="font-display italic font-medium text-2xl tracking-wide text-white group-hover:text-gold transition-colors duration-300">Barokah Inayah</h1>
					<p class="font-body text-[10px] text-white/40 uppercase tracking-[0.2em] group-hover:text-white/70 transition-colors">
						Est. 2024
					</p>
				</div>
			</div>
			
			<div class="hidden md:flex items-center gap-10">
				{[
					{ label: 'Beranda', href: '#hero' },
					{ label: 'Experience', href: '#experience' },
					{ label: 'Menu', href: '#menu' },
					{ label: 'Lokasi', href: '#location' }
				].map((item) => (
					<a
						class="font-body text-sm font-light text-white/60 hover:text-gold transition-colors relative group/link"
						href={item.href}
					>
						{item.label}
						<span class="absolute -bottom-1 left-0 w-0 h-px bg-gold transition-all duration-300 group-hover/link:w-full"></span>
					</a>
				))}
			</div>
			
			<div class="flex items-center gap-4">
				<a
					href="https://wa.me/6282337040547?text=Halo%20Toko%20Barokah%20Inayah%2C%20saya%20mau%20pesan"
					target="_blank"
					class="hidden md:flex btn-magnetic px-6 py-3 rounded-full bg-white/5 hover:bg-gold/10 border border-white/10 hover:border-gold/30 text-white text-xs font-bold uppercase tracking-wider items-center gap-2 transition-all group"
				>
					<span>Pesan Online</span>
					<span class="material-symbols-outlined text-base group-hover:translate-x-1 transition-transform">arrow_forward</span>
				</a>
				<button id="mobileMenuBtn" class="md:hidden text-white p-2 hover:bg-white/10 rounded-full transition-colors"
					><span class="material-symbols-outlined text-3xl font-light">menu_open</span></button
				>
			</div>
		</div>
	</nav>

	<!-- Mobile Menu Overlay -->
	<div
		id="mobileMenuOverlay"
		class="mobile-menu-overlay fixed inset-0 bg-black/80 z-[60] md:hidden backdrop-blur-md"
	>
	</div>

	<!-- Mobile Menu Sidebar -->
	<div
		id="mobileMenu"
		class="mobile-menu fixed top-0 right-0 h-full w-[85vw] max-w-sm bg-[#0a0a0a] border-l border-white/5 z-[70] md:hidden flex flex-col shadow-2xl"
	>
		<div
			class="flex items-center justify-between p-8 border-b border-white/5"
		>
			<span class="font-display italic text-2xl text-white">Menu</span>
			<button id="mobileMenuClose" class="text-white/70 hover:text-white p-2 hover:bg-white/5 rounded-full transition-colors"
				><span class="material-symbols-outlined text-xl">close</span></button
			>
		</div>
		<div class="flex flex-col p-8 gap-4">
			{[
				{ label: 'Beranda', href: '#hero' },
				{ label: 'Experience', href: '#experience' },
				{ label: 'Menu', href: '#menu' },
				{ label: 'Lokasi', href: '#location' }
			].map((item) => (
				<a
					class="mobile-link text-3xl font-display italic text-white/50 hover:text-gold hover:pl-4 transition-all duration-300"
					href={item.href}
				>{item.label}</a>
			))}
		</div>
		<div
			class="mt-auto p-8 border-t border-white/5"
		>
			<a
				href="https://wa.me/6282337040547?text=Halo%20Toko%20Barokah%20Inayah%2C%20saya%20mau%20pesan"
				target="_blank"
				class="w-full flex bg-gold hover:bg-amber-600 text-black px-6 py-5 rounded-2xl text-sm font-bold uppercase tracking-widest items-center justify-center gap-3 shadow-[0_0_20px_rgba(212,175,55,0.3)] transition-all active:scale-95"
			>
				<span class="material-symbols-outlined">chat</span>
				<span>WhatsApp</span>
			</a>
		</div>
	</div>

	<!-- Hero Section -->
	<section
		class="relative min-h-[110vh] flex items-center justify-center overflow-hidden"
		id="hero"
	>
		<div class="absolute inset-0 z-0">
			<!-- Optimized Background Image -->
			<div class="absolute inset-0 z-0">
				<Image 
					src={tokoImage} 
					alt="Background" 
					class="w-full h-full object-cover opacity-30 blur-sm scale-110"
					quality="mid"
				/>
			</div>
			
			<div
				class="absolute inset-0 bg-gradient-to-b from-background-dark/90 via-background-dark/40 to-background-dark z-10"
			>
			</div>
			<div
				class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,transparent_0%,var(--color-background-dark)_120%)] z-10"
			>
			</div>
		</div>
		
		<div
			class="relative z-30 max-w-7xl mx-auto px-6 text-center flex flex-col items-center gap-8 md:gap-12"
		>
			<div
				class="reveal-up inline-flex items-center gap-3 px-5 py-2.5 rounded-full bg-white/5 border border-white/5 backdrop-blur-md mb-8 hover:border-gold/30 transition-colors cursor-default"
			>
				<span class="relative flex h-2 w-2">
				  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-75"></span>
				  <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
				</span>
				<span
					class="font-body text-[10px] font-bold tracking-[0.2em] uppercase text-white/70"
					>Open 24/7 • Jakarta Time: <span id="hero-clock" class="text-gold tabular-nums">00:00:00</span></span
				>
			</div>
			
			<h1
				class="reveal-up reveal-delay-100 font-display italic font-light text-6xl sm:text-8xl md:text-9xl lg:text-[10rem] tracking-tight leading-[0.8] text-white mix-blend-overlay opacity-90 select-none"
			>
				BAROKAH<br /><span class="text-transparent bg-clip-text bg-gradient-to-b from-gold to-orange-900 not-italic font-normal opacity-100 mix-blend-normal drop-shadow-[0_0_50px_rgba(212,175,55,0.2)]">INAYAH</span>
			</h1>
			
			<p
				class="reveal-up reveal-delay-200 max-w-xl font-body text-lg sm:text-xl md:text-2xl text-white/50 font-light leading-relaxed mt-4 px-4 sm:px-0"
			>
				Redefining the <span class="text-white font-normal">street food</span> experience with a touch of modern retail luxury.
			</p>
			
			<div
				class="reveal-up reveal-delay-300 flex flex-col sm:flex-row gap-6 mt-8 w-full sm:w-auto px-4 sm:px-0"
			>
				<a
					href="#experience"
					class="btn-magnetic group h-14 sm:h-16 px-10 rounded-full bg-white text-black font-body font-bold text-sm tracking-widest uppercase shadow-[0_0_40px_-10px_rgba(255,255,255,0.3)] hover:shadow-[0_0_60px_-10px_rgba(255,255,255,0.5)] transition-all flex items-center justify-center gap-3 hover:scale-105"
				>
					Explore
					<span class="material-symbols-outlined group-hover:rotate-45 transition-transform duration-500">arrow_outward</span>
				</a>
				<a
					href="#menu"
					class="btn-magnetic h-14 sm:h-16 px-10 rounded-full bg-transparent border border-white/20 text-white hover:bg-white/5 font-body font-bold text-sm tracking-widest uppercase backdrop-blur-md flex items-center justify-center gap-3 transition-all hover:border-white/50"
				>
					Menu <span class="material-symbols-outlined font-light">restaurant</span>
				</a>
			</div>
		</div>

		<div class="absolute bottom-10 left-10 hidden md:block mix-blend-difference">
			<div class="flex items-center gap-4 text-white/30 font-mono text-xs">
				<span>SCROLL</span>
				<div class="w-12 h-px bg-white/30"></div>
			</div>
		</div>
	</section>

	<!-- Marquee Ticker -->
	<div class="relative z-40 marquee-container rotate-1 md:rotate-2 scale-105 origin-center">
		<div class="marquee-content font-display italic text-2xl md:text-4xl text-black uppercase tracking-widest">
			{"FRESH PENTOL TAHU POJA • OPEN 24 HOURS • MODERN RETAIL EXPERIENCE • BEST STREET FOOD IN SUMENEP • " .repeat(10)}
		</div>
	</div>

	<!-- Experience Section (Bento Grid) -->
	<section
		class="relative py-32 px-4 sm:px-6 md:px-12 opacity-0 reveal-up transition-opacity duration-1000"
		id="experience"
	>
		<div class="max-w-[1400px] mx-auto">
			<div class="mb-20 pl-4 border-l-2 border-gold/50">
				<h2 class="font-display italic text-5xl md:text-7xl text-white mb-4">The Experience</h2>
				<p class="font-body text-white/50 text-xl max-w-lg">Curated essentials meets artisanal flavors.</p>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-12 gap-6 auto-rows-[300px] md:auto-rows-[400px]">
				
				<!-- Large Retail Item -->
				<div class="group bento-card md:col-span-8 relative overflow-hidden">
					<div class="absolute inset-0">
						<Image src={tokoImage} alt="Retail" class="w-full h-full object-cover opacity-60 group-hover:opacity-40 group-hover:scale-105 transition-all duration-1000" />
					</div>
					<div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"></div>
					<div class="absolute bottom-8 left-8 right-8 pointer-events-none">
						<div class="flex items-end justify-between">
							<div>
								<div class="text-gold font-mono text-xs mb-2">01 — RETAIL</div>
								<h3 class="font-display italic text-4xl md:text-5xl text-white mb-2">Daily Essentials</h3>
								<p class="text-white/60 max-w-md">Premium groceries available 24/7 in a modern, curated space.</p>
							</div>
							<div class="size-16 rounded-full border border-white/20 flex items-center justify-center text-white/50 group-hover:bg-white group-hover:text-black group-hover:border-white transition-all duration-500">
								<span class="material-symbols-outlined text-2xl">arrow_outward</span>
							</div>
						</div>
					</div>
					<a href="#products" class="absolute inset-0 z-10" aria-label="View Products"></a>
				</div>

				<!-- Tall Pentol Item -->
				<div id="menu" class="group bento-card md:col-span-4 md:row-span-2 relative bg-[#1a0f0a] overflow-hidden">
					<div class="absolute inset-0">
						<Image src={pentolImage} alt="Pentol" class="w-full h-full object-cover opacity-70 group-hover:opacity-50 group-hover:scale-110 transition-all duration-1000" />
					</div>
					<div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/20 to-black"></div>
					<div class="absolute top-8 right-8">
						<div class="bg-primary/90 text-white text-xs font-bold px-3 py-1 rounded-full backdrop-blur-md shadow-lg">HOT</div>
					</div>
					<div class="absolute bottom-8 left-8 right-8">
						<div class="text-gold font-mono text-xs mb-2">02 — CULINARY</div>
						<h3 class="font-display italic text-4xl md:text-5xl text-white mb-4">Pentol Tahu<br/>Ala Poja</h3>
						<p class="text-white/60 mb-10">Legendary street food elevated to an art form. Served with our signature peanut sauce.</p>
						<a 
							href="https://wa.me/6282337040547?text=Halo%2C%20saya%20mau%20pesan%20Pentol%20Tahu%20Ala%20Poja" 
							target="_blank" 
							class="btn-order-now w-full block text-center rounded-xl"
						>
							Order Now
						</a>
					</div>
				</div>

				<!-- Hours Item (With Live Clock) -->
				<div class="group bento-card md:col-span-4 bg-[#0a0a0a] flex flex-col justify-between p-8 relative overflow-hidden">
					<div class="absolute -right-10 -top-10 size-40 bg-gold/5 rounded-full blur-3xl group-hover:bg-gold/10 transition-colors"></div>
					<div class="flex justify-between items-start">
						<div class="bg-white/5 p-3 rounded-full text-white/50 group-hover:text-gold transition-colors">
							<span class="material-symbols-outlined">schedule</span>
						</div>
						<div class="flex items-center gap-2">
							<span class="text-[10px] font-mono text-white/30 uppercase tracking-widest">Jakarta</span>
							<div class="size-2 rounded-full bg-green-500 animate-pulse"></div>
						</div>
					</div>
					<div class="mt-8 flex-1 flex flex-col justify-center">
						<div id="main-clock" class="digital-clock text-5xl md:text-6xl text-white font-light">00:00:00</div>
						<div class="text-gold/50 font-mono text-[10px] mt-2 uppercase tracking-[0.3em]">Aktif Sekarang</div>
					</div>
					<div>
						<div class="text-gold font-mono text-xs mb-2">03 — HOURS</div>
						<h3 class="font-display italic text-3xl text-white mb-1">Open 24/7</h3>
						<p class="text-white/40 text-sm">Tanpa hari libur, siap melayani kapan saja.</p>
					</div>
				</div>

				<!-- Location Item (Clickable) -->
				<div id="location" class="group bento-card md:col-span-4 relative overflow-hidden">
					<div class="absolute inset-0 bg-slate-900 pointer-events-none">
						<iframe
							src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3488.199435011929!2d113.9298492!3d-7.0504174!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2dd9e3ace3ee2fd5%3A0x5a789032e467ea30!2sToko%20barokah%20inayah!5e0!3m2!1sen!2sid!4v1739536100000!5m2!1sen!2sid"
							width="100%"
							height="100%"
							class="opacity-50 grayscale hover:grayscale-0 transition-all duration-700"
							style="border:0;"
							allowfullscreen=""
							loading="lazy"
						></iframe>
					</div>
					<div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent pointer-events-none group-hover:via-black/20 transition-all duration-500"></div>
					<div class="absolute bottom-8 left-8 right-8 flex items-center justify-between pointer-events-none">
						<div class="flex flex-col gap-1">
							<div class="text-gold font-mono text-xs uppercase tracking-widest">04 — LOCATION</div>
							<h3 class="font-display italic text-2xl md:text-3xl text-white">Kalianget, Sumenep</h3>
						</div>
						<div class="size-12 rounded-full border border-white/20 flex items-center justify-center text-white/50 group-hover:bg-gold group-hover:text-black group-hover:border-gold transition-all duration-500">
							<span class="material-symbols-outlined">map</span>
						</div>
					</div>
					<a 
						href="https://maps.app.goo.gl/yqeuzkDCHTWuRsNE7" 
						target="_blank" 
						class="absolute inset-0 z-10" 
						aria-label="Open Google Maps"
					></a>
				</div>

			</div>
		</div>
	</section>

	<section class="py-32 bg-black border-t border-white/5">
		<div class="max-w-7xl mx-auto px-6 text-center">
			<a href="#hero" class="font-display italic text-4xl text-white/30 hover:text-gold transition-colors cursor-pointer">Back to Top</a>
			<div class="mt-12 text-white/20 font-mono text-xs uppercase tracking-widest">
				© 2024 Barokah Inayah • Crafted with precision
			</div>
		</div>
	</section>

	<script>
		// --- Mobile Menu Logic ---
		const mobileMenu = document.getElementById("mobileMenu");
		const mobileMenuOverlay = document.getElementById("mobileMenuOverlay");
		const mobileMenuBtn = document.getElementById("mobileMenuBtn");
		const mobileMenuClose = document.getElementById("mobileMenuClose");

		function toggleMenu(show) {
			if (show) {
				mobileMenu?.classList.add("active");
				mobileMenuOverlay?.classList.add("active");
				document.body.style.overflow = "hidden";
			} else {
				mobileMenu?.classList.remove("active");
				mobileMenuOverlay?.classList.remove("active");
				document.body.style.overflow = "";
			}
		}

		mobileMenuBtn?.addEventListener("click", () => toggleMenu(true));
		mobileMenuClose?.addEventListener("click", () => toggleMenu(false));
		mobileMenuOverlay?.addEventListener("click", () => toggleMenu(false));
		document.querySelectorAll(".mobile-link").forEach(l => l.addEventListener("click", () => toggleMenu(false)));

		// --- Magnetic Button Effect ---
		const buttons = document.querySelectorAll<HTMLElement>('.btn-magnetic');

		buttons.forEach(btn => {
			btn.addEventListener('mousemove', (e) => {
				const rect = btn.getBoundingClientRect();
				const x = e.clientX - rect.left - rect.width / 2;
				const y = e.clientY - rect.top - rect.height / 2;
				
				btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
			});

			btn.addEventListener('mouseleave', () => {
				btn.style.transform = 'translate(0, 0)';
			});
		});

		// --- Scroll Reveal (Simple Intersection Observer) ---
		const revealElements = document.querySelectorAll(".reveal-up");
		const observer = new IntersectionObserver((entries) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.classList.add('active');
					observer.unobserve(entry.target);
				}
			});
		}, { threshold: 0.1 });

		revealElements.forEach(el => observer.observe(el));

		// --- Live Jakarta Clock ---
		function updateClock() {
			const now = new Date();
			const options: Intl.DateTimeFormatOptions = {
				timeZone: "Asia/Jakarta",
				hour: "2-digit",
				minute: "2-digit",
				second: "2-digit",
				hour12: false
			};
			const timeString = new Intl.DateTimeFormat("en-GB", options).format(now);
			
			const clockEl = document.getElementById("main-clock");
			const heroClockEl = document.getElementById("hero-clock");
			
			if (clockEl) clockEl.textContent = timeString;
			if (heroClockEl) heroClockEl.textContent = timeString;
		}

		setInterval(updateClock, 1000);
		updateClock(); // Initial call
	</script>
</Layout>
